<!doctype html>
<html lang="en" class="h-100">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
  <meta name="generator" content="Hugo 0.79.0">
  <title>Cover Template Â· Bootstrap v5.0</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
  <link rel="shortcut icon" href="https://raw.githubusercontent.com/onysu/music-streaming/main/files/ony.png"
    type="image/x-icon">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.2/css/all.min.css" />
  <style>
    body {
      text-shadow: 0 .05rem .1rem rgba(0, 0, 0, .5);
      box-shadow: inset 0 0 5rem rgba(0, 0, 0, .5);
    }

    .text-center {
      text-align: center !important;
    }

    /* .cover-container {
      max-width: 42em;
    } */

    /* .text-white {
      color: #666 !important;
    } */

    .nav-masthead .nav-link {
      padding: .25rem 0;
      font-weight: 700;
      color: rgba(255, 255, 255, .5);
      background-color: transparent;
      border-bottom: .25rem solid transparent;
    }

    .nav-masthead .nav-link:hover,
    .nav-masthead .nav-link:focus {
      border-bottom-color: rgba(255, 255, 255, .25);
    }

    .nav-masthead .nav-link+.nav-link {
      margin-left: 1rem;
    }

    .nav-masthead .active {
      color: #fff;
      border-bottom-color: #fff;
    }

    /* main {
      margin-top: 40%;
    } */

    .bd-placeholder-img {
      font-size: 1.125rem;
      text-anchor: middle;
      -webkit-user-select: none;
      -moz-user-select: none;
      user-select: none;
    }

    @media (min-width: 768px) {
      .bd-placeholder-img-lg {
        font-size: 3.5rem;
      }
    }

    /* player */
    .bg-container {
      position: fixed;
      /* top: -50%; */
      /* left: -50%; */
      /* width: 200%; */
      /* height: 200%; */
      z-index: -1;
    }

    .bg-container img {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      margin: auto;
      min-width: 50%;
      min-height: 50%;
      filter: blur(15px);
      -webkit-filter: blur(50px);
      transform: scale(1.1);
    }

    .player-container {
      height: 500px;
      /* width: 400px; */
      /* width: 100%; */
      background: #e7e7e7;
      border-radius: 20px;
      box-shadow: 0 15px 30px 5px rgba(0, 0, 0, 0.3);
    }

    .img-container {
      width: 300px;
      height: 300px;
      position: relative;
      top: -50px;
      left: 14px;
      /* display: flex; */
      /* justify-content: center; */
      /* align-items: center; */
      margin-top: 50px;
    }

    .img-container img {
      height: 0;
      width: 0;
      opacity: 0;
      object-fit: cover;
      border-radius: 20px;
      box-shadow: 0 5px 30px 5px rgba(0, 0, 0, 0.5);
      transition: .5s;
    }

    .img-container img.active {
      transition: .5s;
      opacity: 1;
      width: 100%;
      height: 100%;
    }


    h2 {
      font-size: 25px;
      text-align: center;
      margin: 0;
    }

    h3 {
      font-size: 20px;
      text-align: center;
      font-weight: 400;
      margin: 5px 0 0;
    }

    /* Progress */
    .progress-container {
      background: #fff;
      border-radius: 5px;
      cursor: pointer;
      margin: 40px 20px;
      height: 4px;
      width: 90%;
    }

    .progress {
      background: #242323;
      border-radius: 5px;
      height: 100%;
      width: 0%;
      transition: width 0.1s linear;
    }

    .duration-wrapper {
      position: relative;
      top: -25px;
      display: flex;
      justify-content: space-between;
    }

    /* Controls */
    .player-controls {
      position: relative;
      top: -15px;
      left: 22px;
      /* width: 200px; */
    }

    .fas {
      font-size: 30px;
      color: rgb(129, 129, 129);
      margin-right: 30px;
      cursor: pointer;
      user-select: none;
    }

    .fas:hover {
      filter: brightness(80%);
    }

    .main-button {
      font-size: 40px;
      position: relative;
      top: 3px;
    }

    /* Media Query: iPhone (Vertical) */
    /* @media screen and (max-width: 376px) {
      .player-container {
        width: 95vw;
      }

      .img-container {
        left: 29px;
      }

      h2 {
        font-size: 20px;
      }

      h3 {
        font-size: 15px;
      }

      .player-controls {
        top: -10px;
        left: 100px;
      }
    } */
  </style>
</head>

<body class="d-flex h-100 text-center text-white bg-dark">

  <div class="cover-container d-flex w-100 h-100 p-3 mx-auto flex-column">
    <!-- <header class="mb-auto">
      <div>
        <h3 class="float-md-start mb-0">Cover</h3>
        <nav class="nav nav-masthead justify-content-center float-md-end">
          <a class="nav-link active" aria-current="page" href="#">Home</a>
          <a class="nav-link" href="#">Features</a>
          <a class="nav-link" href="#">Contact</a>
        </nav>
      </div>
    </header> -->

    <main>

      <div class="bg-container">
        <img src="" alt="" id="background">
      </div>
      <div class="player-container">
        <!-- Song -->
        <div class="img-container">
          <img src="" alt="" id="cover" class="active">
        </div>
        <h2 id="title"></h2>
        <h3 id="artist"></h3>
        <audio src=""></audio>
        <!-- Progress -->
        <div class="progress-container" id="progress-container">
          <div class="progress" id="progress"></div>
          <div class="duration-wrapper">
            <span id="current-time"></span>
            <span id="duration"></span>
          </div>
        </div>
        <!-- Controls -->
        <div class="player-controls">
          <i class="fas fa-backward" id="prev" title="Previous"></i>
          <i class="fas fa-play main-button" id="play" title="Play"></i>
          <i class="fas fa-forward" id="next" title="Next"></i>
        </div>
      </div>

      <!-- <h1>Cover your page.</h1>
      <p class="lead">Cover is a one-page template for building simple and beautiful home pages. Download, edit the
        text, and add your own fullscreen background photo to make it your own.</p>
      <p class="lead">
        <a href="#" class="btn btn-lg btn-secondary fw-bold border-white bg-white">Learn more</a>
      </p> -->

    </main>

    <footer class="mt-auto text-white-50">
      <p>Cover template for <a href="https://getbootstrap.com/" class="text-white">Bootstrap</a>, by <a
          href="https://twitter.com/mdo" class="text-white">@mdo</a>.</p>
    </footer>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous">
  </script>

  <script>
    const image = document.querySelector('#cover');
    const title = document.getElementById('title');
    const artist = document.getElementById('artist');
    const music = document.querySelector('audio');
    const currentTimeEl = document.getElementById('current-time');
    const durationEl = document.getElementById('duration');
    const progress = document.getElementById('progress');
    const progressContainer = document.getElementById('progress-container');
    const prevBtn = document.getElementById('prev');
    const playBtn = document.getElementById('play');
    const nextBtn = document.getElementById('next');
    const background = document.getElementById("background");

    // Music
    const songs = [{
        path: 'files/Jihan Audy - Suara Syairku.mp3',
        displayName: 'Suara Syairku',
        artist: 'Jihan Audy',
        cover: "https://i0.wp.com/www.medinafm.id/wp-content/uploads/2020/01/JihanAudy-SederhanaCarakuMencintaimuNewRelease.jpg?fit=1465%2C1465&ssl=1",
      },
      {
        path: 'files/The Doors - A Feast Of Friends.mp3',
        displayName: 'A Feast Of Friends',
        artist: 'The Doors',
        cover: "https://m.media-amazon.com/images/I/91u98X6VlhL._SS500_.jpg",
      },
      {
        path: 'files/Napalm Death - Suffer The Children.mp3',
        displayName: 'Suffer The Children',
        artist: 'Napalm Death',
        cover: "https://img.discogs.com/AH6qJA_sPvTl8nX9Mu171xdRvEo=/fit-in/600x600/filters:strip_icc():format(jpeg):mode_rgb():quality(90)/discogs-images/R-986119-1404669937-8254.jpeg.jpg",
      },
      {
        path: 'https://raw.githubusercontent.com/ustabasiibrahim/music-player/master/assets/music/3.mp3',
        displayName: 'Powerless',
        artist: 'Linkin Park',
        cover: "https://images.genius.com/c5a58cdaab9f3199214f0e3c26abbd0e.1000x1000x1.jpg",
      },
      {
        path: 'https://raw.githubusercontent.com/ustabasiibrahim/music-player/master/assets/music/4.mp3',
        displayName: 'Seni Dert Etmeler',
        artist: 'Madrigal',
        cover: "https://www.radyomega.fm/wp-content/uploads/2020/04/MADRIGAL-600.jpg",
      },
      {
        path: 'https://raw.githubusercontent.com/ustabasiibrahim/music-player/master/assets/music/5.mp3',
        displayName: 'Ederlezi',
        artist: 'Solomun',
        cover: "https://m.media-amazon.com/images/I/616t0841uvL._SS500_.jpg",
      },
    ];

    // Periksa apakah memutar lagu
    let isPlaying = false;

    // Play
    function playSong() {
      isPlaying = true;
      playBtn.classList.replace('fa-play', 'fa-pause');
      playBtn.setAttribute('title', 'Pause');
      music.play();
    }

    // Pause
    function pauseSong() {
      isPlaying = false;
      playBtn.classList.replace('fa-pause', 'fa-play');
      playBtn.setAttribute('title', 'Play');
      music.pause();
    }

    // Play or Pause Event Listener
    playBtn.addEventListener('click', () => (isPlaying ? pauseSong() : playSong()));

    // Update DOM
    function loadSong(song) {
      title.textContent = song.displayName;
      artist.textContent = song.artist;
      music.src = song.path;
      changeCover(song.cover);
    }

    function changeCover(cover) {
      image.classList.remove('active');
      setTimeout(() => {
        image.src = cover;
        image.classList.add('active');
      }, 100)
      background.src = cover;
    }

    // Lagu Saat Ini
    let songIndex = 0;

    // Lagu Sebelumnya
    function prevSong() {
      songIndex--;
      if (songIndex < 0) {
        songIndex = songs.length - 1;
      }
      loadSong(songs[songIndex]);
      playSong();
    }

    // Lagu berikutnya
    function nextSong() {
      songIndex++;
      if (songIndex > songs.length - 1) {
        songIndex = 0;
      }
      loadSong(songs[songIndex]);
      playSong();
    }

    // Saat Dimuat - Pilih Lagu Pertama
    loadSong(songs[songIndex]);

    // Perbarui progres bar & waktu
    function updateProgressBar(e) {
      if (isPlaying) {
        const {
          duration,
          currentTime
        } = e.srcElement;
        // Perbarui lebar bar
        const progressPercent = (currentTime / duration) * 100;
        progress.style.width = `${progressPercent}%`;
        // Hitung tampilan untuk durasi
        const durationMinutes = Math.floor(duration / 60);
        let durationSeconds = Math.floor(duration % 60);
        if (durationSeconds < 10) {
          durationSeconds = `0${durationSeconds}`;
        }
        // Tunda pengalihan elemen durasi untuk menghindari NaN
        if (durationSeconds) {
          durationEl.textContent = `${durationMinutes}:${durationSeconds}`;
        }
        // Hitung tampilan untuk currentTime
        const currentMinutes = Math.floor(currentTime / 60);
        let currentSeconds = Math.floor(currentTime % 60);
        if (currentSeconds < 10) {
          currentSeconds = `0${currentSeconds}`;
        }
        currentTimeEl.textContent = `${currentMinutes}:${currentSeconds}`;
      }
    }

    // Seting Progress Bar
    function setProgressBar(e) {
      const width = this.clientWidth;
      const clickX = e.offsetX;
      const {
        duration
      } = music;
      music.currentTime = (clickX / width) * duration;
    }

    // Event Listeners
    prevBtn.addEventListener('click', prevSong);
    nextBtn.addEventListener('click', nextSong);
    music.addEventListener('ended', nextSong);
    music.addEventListener('timeupdate', updateProgressBar);
    progressContainer.addEventListener('click', setProgressBar);
  </script>

</body>

</html>